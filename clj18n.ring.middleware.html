<!DOCTYPE html>
<html><head><link href="css/default.css" rel="stylesheet" type="text/css"><script src="js/jquery.min.js" type="text/javascript"></script><script src="js/page_effects.js" type="text/javascript"></script><title>clj18n.ring.middleware documentation</title></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html">Clj18n 0.3.0 API documentation</a></h1></div><div class="sidebar" id="namespaces"><h3><span>Namespaces</span></h3><ul><li><a href="clj18n.html"><span>clj18n</span></a></li><li><a href="clj18n.localization.html"><span>clj18n.localization</span></a></li><li><a href="clj18n.reader.html"><span>clj18n.reader</span></a></li><li class="current"><a href="clj18n.ring.middleware.html"><span>clj18n.ring.middleware</span></a></li><li><a href="clj18n.translation.html"><span>clj18n.translation</span></a></li></ul></div><div class="sidebar" id="vars"><h3>Public Vars</h3><ul><li><a href="clj18n.ring.middleware.html#var-locale-from-domain"><span>locale-from-domain</span></a></li><li><a href="clj18n.ring.middleware.html#var-locale-from-header"><span>locale-from-header</span></a></li><li><a href="clj18n.ring.middleware.html#var-locale-from-param"><span>locale-from-param</span></a></li><li><a href="clj18n.ring.middleware.html#var-locale-from-uri"><span>locale-from-uri</span></a></li><li><a href="clj18n.ring.middleware.html#var-wrap-i18n"><span>wrap-i18n</span></a></li><li><a href="clj18n.ring.middleware.html#var-wrap-locale"><span>wrap-locale</span></a></li><li><a href="clj18n.ring.middleware.html#var-wrap-translation"><span>wrap-translation</span></a></li></ul></div><div class="namespace-docs" id="content"><h2>clj18n.ring.middleware documentation</h2><pre class="doc">Ring middleware for loading dictionaries and setting locales.
</pre><div class="public" id="var-locale-from-domain"><h3>locale-from-domain</h3><div class="usage"><code>(locale-from-domain {:keys [server-name]})</code></div><pre class="doc">Gets the locale from the request server-name, by looking for a two-character
language subdomain, avoiding capture of www and main domain.</pre></div><div class="public" id="var-locale-from-header"><h3>locale-from-header</h3><div class="usage"><code>(locale-from-header {:keys [headers]})</code></div><pre class="doc">Gets the locale from the request Accept-Language header.
</pre></div><div class="public" id="var-locale-from-param"><h3>locale-from-param</h3><div class="usage"><code>(locale-from-param {:keys [params]})</code></div><pre class="doc">Gets the locale based on the :locale param.
</pre></div><div class="public" id="var-locale-from-uri"><h3>locale-from-uri</h3><div class="usage"><code>(locale-from-uri {:keys [uri], :as req})</code></div><pre class="doc">Gets the locale from the request uri, using the first part of the URI as the
locale.</pre></div><div class="public" id="var-wrap-i18n"><h3>wrap-i18n</h3><div class="usage"><code>(wrap-i18n app dict &amp; args)</code></div><pre class="doc">Calls both wrap-locale and wrap-translation with the given arguments.
</pre></div><div class="public" id="var-wrap-locale"><h3>wrap-locale</h3><div class="usage"><code>(wrap-locale app &amp; {:keys [default locale-fns], :or {locale-fns [locale-from-header locale-from-param]}})</code></div><pre class="doc">Wraps app in a clj18n/with-locale call, with locale bound to the first value
returned by :locale-fns or to :default. :locale-fns are functions that take
the request as argument and return a locale string or nil.</pre></div><div class="public" id="var-wrap-translation"><h3>wrap-translation</h3><div class="usage"><code>(wrap-translation app dict)</code></div><pre class="doc">Sets request :t to be a function of translations for dict.
</pre></div></div></body></html>